---
import { type NavBarLink } from "../../types/config";
import { Icon } from "astro-icon/components";
import { url } from "../../utils/url-utils";
import { getCategoryList } from "../../utils/content-utils";
import { getCategoryUrl } from "../../utils/url-utils";

interface Props {
  links: NavBarLink[];
}

const links = Astro.props.links;
const categories = await getCategoryList();
---

<div
  id="nav-menu-panel"
  class:list={[
    "float-panel float-panel-closed absolute transition-all fixed right-4 px-2 py-2",
  ]}
>
  <!-- Categories Section -->
  <div class="mb-2">
    <div
      class="text-xs font-semibold text-50 px-3 py-2 uppercase tracking-wide"
    >
      Categories
    </div>
    {
      categories.slice(0, 6).map((category) => (
        <a
          href={getCategoryUrl(category.name)}
          class="group flex justify-between items-center py-2 pl-3 pr-1 rounded-lg gap-8
          hover:bg-[var(--btn-plain-bg-hover)] active:bg-[var(--btn-plain-bg-active)] transition
      "
        >
          <div class="transition text-black/75 dark:text-white/75 group-hover:text-[var(--primary)] group-active:text-[var(--primary)]">
            {category.name}
          </div>
          <div class="text-xs text-50 bg-[var(--btn-regular-bg)] px-2 py-0.5 rounded-full">
            {category.count}
          </div>
        </a>
      ))
    }
  </div>

  <!-- Divider -->
  <div class="border-t border-black/10 dark:border-white/10 my-2"></div>

  <!-- About Link -->
  <a
    href={url("/about/")}
    class="group flex justify-between items-center py-2 pl-3 pr-1 rounded-lg gap-8
      hover:bg-[var(--btn-plain-bg-hover)] active:bg-[var(--btn-plain-bg-active)] transition"
  >
    <div
      class="transition text-black/75 dark:text-white/75 font-bold group-hover:text-[var(--primary)] group-active:text-[var(--primary)]"
    >
      About
    </div>
    <Icon
      name="material-symbols:chevron-right-rounded"
      class="transition text-[1.25rem] text-[var(--primary)]"
    />
  </a>
</div>
