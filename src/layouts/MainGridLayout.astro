---
import "../styles/global.css";
import Footer from "@components/Footer.astro";
import Navbar from "@components/Navbar.astro";
import BackToTop from "@components/control/BackToTop.astro";

import Layout from "./Layout.astro";
import { Icon } from "astro-icon/components";
import { siteConfig } from "../config";

interface Props {
  title?: string;
  banner?: string;
  description?: string;
  lang?: string;
  setOGTypeArticle?: boolean;
}

const { title, banner, description, lang, setOGTypeArticle } = Astro.props;
const hasBannerCredit =
  siteConfig.banner.enable && siteConfig.banner.credit.enable;
const hasBannerLink = !!siteConfig.banner.credit.url;
---

<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="icon"
      type="image/png"
      href="src/assets/images/drroot.jpeg"
      sizes="16x16"
    />
    <title>Blog Avnish singh</title>
  </head>
  <body>
    <Layout
      title={title}
      banner={banner}
      description={description}
      lang={lang}
      setOGTypeArticle={setOGTypeArticle}
    >
      <slot slot="head" name="head" />
      <div
        id="top-row"
        class="z-50 pointer-events-none relative transition-all duration-700 max-w-[var(--page-width)] px-0 md:px-4 mx-auto"
        class:list={[""]}
      >
        <div id="navbar-wrapper" class="pointer-events-auto transition-all">
          <Navbar />
        </div>
      </div>

      <div
        class="absolute w-full"
        class:list={[
          {
            "top-[30vh]": siteConfig.banner.enable,
            "top-[4.5rem]": !siteConfig.banner.enable,
          },
        ]}
      >
        <div class="relative max-w-[var(--page-width)] mx-auto">
          <div
            id="main-grid"
            class="transition duration-700 w-full mx-auto px-4 md:px-6"
          >
            <!-- Banner image credit -->
            {
              hasBannerCredit && (
                <a
                  href={siteConfig.banner.credit.url}
                  id="banner-credit"
                  target="_blank"
                  rel="noopener"
                  aria-label="Visit image source"
                  class:list={[
                    "group onload-animation transition-all absolute flex justify-center items-center rounded-full " +
                      "px-3 right-4 -top-[3.25rem] bg-black/60 hover:bg-black/70 h-9",
                    { "hover:pr-9 active:bg-black/80": hasBannerLink },
                  ]}
                >
                  <Icon
                    class="text-white/75 text-[1.25rem] mr-1"
                    name="material-symbols:copyright-outline-rounded"
                  />
                  <div class="text-white/75 text-xs">
                    {siteConfig.banner.credit.text}
                  </div>
                  <Icon
                    class:list={[
                      "transition absolute text-[oklch(0.75_0.14_var(--hue))] right-4 text-[0.75rem] opacity-0",
                      { "group-hover:opacity-100": hasBannerLink },
                    ]}
                    name="fa6-solid:arrow-up-right-from-square"
                  />
                </a>
              )
            }

            <main
              id="swup-container"
              class="transition-swup-fade overflow-hidden"
            >
              <div id="content-wrapper" class="onload-animation pt-8">
                <slot />
                <div class="footer onload-animation mt-8">
                  <Footer />
                </div>
              </div>
            </main>
          </div>
          <BackToTop />
        </div>
      </div>
    </Layout>
  </body>
</html>
